<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Admin Panel | USDT Stacking Dashboard</title>
  <script src="https://cdn.jsdelivr.net/npm/ethers@6.9.0/dist/ethers.min.js"></script>
  <style>
    body{font-family:Arial;background:#101010;color:#fff;padding:20px;}
    .card{background:#1c1c1c;padding:18px;border-radius:10px;margin-bottom:20px;}
    input,button{padding:8px;margin:6px;border-radius:8px;border:none;}
    button{background:#ffb300;color:#000;font-weight:bold;cursor:pointer;}
  </style>
</head>
<body>
<h2>Admin Panel (Owner: 0x8b2Ce640BD59C7333e72BaE9a3Fc8D33d5460c63)</h2>

<div class="card">
  <label>Staking Contract:</label>
  <input id="stakingAddr" value="0xdA95503f22813eceAFE4338cE9241FEae5308637" style="width:80%" />
  <button id="load">Load</button>
</div>

<div id="panel" style="display:none" class="card">
  <h3>Parameters</h3>
  <input id="minStake" placeholder="minStake" />
  <input id="stakeMultiple" placeholder="stakeMultiple" /><br/>
  <input id="minWithdraw" placeholder="minWithdraw" />
  <input id="withdrawMultiple" placeholder="withdrawMultiple" /><br/>
  <input id="dailyRatePPM" placeholder="dailyRatePPM" />
  <input id="instantPercent" placeholder="instantPercent" />
  <input id="withdrawFeePercent" placeholder="withdrawFeePercent" /><br/>
  <button id="setParams">Update Params</button>
</div>

<div class="card">
  <h3>Admin Withdraw</h3>
  <input id="withdrawAmt" placeholder="Amount base units" />
  <input id="withdrawTo" placeholder="To Address" style="width:60%" />
  <button id="adminWithdraw">Withdraw</button>
</div>

<script>
const STAKING_ABI = [
 "function setParams(uint256,uint256,uint256,uint256,uint256,uint256,uint256,uint256)",
 "function adminWithdraw(uint256,address)",
 "function minStake() view returns (uint256)",
 "function stakeMultiple() view returns (uint256)",
 "function minWithdraw() view returns (uint256)",
 "function withdrawMultiple() view returns (uint256)",
 "function dailyRatePPM() view returns (uint256)",
 "function instantPercent() view returns (uint256)",
 "function withdrawFeePercent() view returns (uint256)"
];
let provider, signer, stakingContract;
async function load(){
  provider = new ethers.BrowserProvider(window.ethereum);
  await provider.send('eth_requestAccounts', []);
  signer = await provider.getSigner();
  const addr = document.getElementById('stakingAddr').value.trim();
  stakingContract = new ethers.Contract(addr, STAKING_ABI, signer);
  document.getElementById('panel').style.display = 'block';
  document.getElementById('minStake').value = (await stakingContract.minStake()).toString();
  document.getElementById('stakeMultiple').value = (await stakingContract.stakeMultiple()).toString();
  document.getElementById('minWithdraw').value = (await stakingContract.minWithdraw()).toString();
  document.getElementById('withdrawMultiple').value = (await stakingContract.withdrawMultiple()).toString();
  document.getElementById('dailyRatePPM').value = (await stakingContract.dailyRatePPM()).toString();
  document.getElementById('instantPercent').value = (await stakingContract.instantPercent()).toString();
  document.getElementById('withdrawFeePercent').value = (await stakingContract.withdrawFeePercent()).toString();
}
async function setParams(){
  const tx = await stakingContract.setParams(
    document.getElementById('minStake').value,
    document.getElementById('stakeMultiple').value,
    document.getElementById('minWithdraw').value,
    document.getElementById('withdrawMultiple').value,
    3,
    document.getElementById('dailyRatePPM').value,
    document.getElementById('instantPercent').value,
    document.getElementById('withdrawFeePercent').value
  );
  await tx.wait(); alert('Params updated ✅');
}
async function adminWithdraw(){
  const tx = await stakingContract.adminWithdraw(
    document.getElementById('withdrawAmt').value,
    document.getElementById('withdrawTo').value
  );
  await tx.wait(); alert('Withdraw complete ✅');
}
document.getElementById('load').onclick = load;
document.getElementById('setParams').onclick = setParams;
document.getElementById('adminWithdraw').onclick = adminWithdraw;
</script>
</body>
</html>
